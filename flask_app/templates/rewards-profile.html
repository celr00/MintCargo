{% extends "layout.html" %}

{% block title%}Rewards{% endblock %}
{% block subtitle%}everything about our bonus system!{% endblock %}

{% block content %}

<!-- Confirm Modal -->
<div class="modal" tabindex="-1" id="confirm">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Update Credentials</h5>
      </div>
      <div class="modal-body">
        <p>Do you really want to update your <b>username</b> and/or <b>password</b>?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button type="submit" form="update-user" type="button" class="btn btn-dark">Accept</button>
      </div>
    </div>
  </div>
</div>

<section class="profile container">
  <div class="row align-items-center">
    <div class="col-md-6 col-12">
      <form id="update-user" action="/update-user" method="POST">
        <h4>Username</h4>
        <input type="text" name="username" value="{{ session.user }}" placeholder="example321" required />
        <br>
        <h4>Password</h4>
        <input type="password" name="password" placeholder="********" required />
        <br>
        <button type="button" onclick="prepareUpdate()" class="btn btn-dark btn-lg">Update</button>
      </form>
    </div>
    <div class="col-md-6 col-12">
      <div class="divider">
        <h4>Company Name</h4>
        <p>{{ session.name }}</p>
      </div>
      <div class="divider">
        <h4>Address(es)</h4>
        {% if addresses|length > 0 %}
          <ul>
            {% for address in addresses %}
              <li>{{ address[1] }}</li>
            {% endfor %}
          </ul>
        {% else %}
          <p>There are no addresses for this company.</p>
        {% endif %}
      </div>
      <div class="divider">
        <h4>Points</h4>
        <p>{{ session.points }}</p>
      </div>
      <div class="divider">
        <h4>Total orders</h4>
        <p>{{ orders }}</p>
      </div>
    </div>
  </div>
</section>

<script>
  function prepareUpdate() {
    $('#confirm').modal('show');
  }
</script>

{% endblock %}