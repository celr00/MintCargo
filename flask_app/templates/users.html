{% extends "layout.html" %}

{% block title%}Users{% endblock %}

{% block content %}

<!-- Create User Modal -->
<div class="modal" tabindex="-1" id="customer">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">
        {% if msg != None %}
        {{ msg }}
        {% endif %}
        </h5>
      </div>
      <div class="modal-body">
        <section class="user-modal">
          <h4 id="product-name" class="mt-0 mb-3">New User</h4>
          <form id="cUser-form" action="/create-user" method="POST">
            <div class="form-options">
              <label for="company-name">Company Name: </label>
              <input type="text" name="company-name" id="company-name" required autofocus />
              <br>
              <label for="username">Username: </label>
              <input type="text" name="username" id="username" required autofocus />
              <br>
              <label for="password">Password: </label>
              <input type="text" name="password" id="password" required autofocus />
              <br>
              <label for="password-conf">Confirm Password: </label>
              <input type="text" name="password-conf" id="password-conf" required autofocus />
            </div>
            <button type="submit" class="btn btn-dark">Create</button>
          </form>
        </section>
      </div>
    </div>
  </div>
</div>

{% if msg %}
<script>
  $("#customer").modal('show');
</script>
{% endif %}

<section class="query-header container">
    {% if users|length > 0 %}
      <div class="query-info">
        <button class="btn, btn-dark" onclick="createUser()">New User</button>
        <p><b>Total number of users: </b>{{ users|length }}</p>
      </div>
      <div class="table-responsive">
        <table class="table table-dark table-striped table-hover">
          <thead class="table">
            <tr>
              <th>#</th>
              <th>Company</th>
              <th>Username</th>
              <th>Password</th>
            </tr>
          </thead>
          <tbody>
            {% for i in range(users|length) %}
              <tr>
                  <!-- # -->
                  <td>{{ i+1 }}</td>
                  <!-- Product -->
                  <td>{{ users[i][0] }}</td>
                  <!-- Quantity -->
                  <td>{{ users[i][1] }}</td>
                  <!-- Date -->
                  <td>{{ users[i][2] }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <h3>There are no active users</h3>
    {% endif %}
  </section>

  <script>
    function createUser(){
      $("#customer").modal('show');
    }
  </script>

{% endblock %}