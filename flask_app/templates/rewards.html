{% extends "layout.html" %}

{% block title%}Rewards{% endblock %}
{% block subtitle%}everything about our bonus system!{% endblock %}

{% block content %}

<main class="rewards container">
  <div class="row">
    <div class="nav flex-column nav-pills col-md-4 col-12" id="tab" role="tablist" aria-orientation="vertical">
      <a class="nav-link active" id="rules-tab" data-toggle="pill" href="#rules" role="tab" aria-controls="rules" aria-selected="true">Rules</a>
      <a class="nav-link" id="catalog-tab" data-toggle="pill" href="#catalog" role="tab" aria-controls="catalog" aria-selected="false">Catalog</a>
      <a class="nav-link" id="orders-tab" data-toggle="pill" href="#orders" role="tab" aria-controls="orders" aria-selected="false">Orders</a>
      <a class="nav-link" id="profile-tab" data-toggle="pill" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Profile</a>
    </div>
  </div>
  <div class="tab-content" id="tabContent">
    <div class="tab-pane fade show active" id="rules" role="tabpanel" aria-labelledby="system-tab">
      <section class="rewards-info container">
        <div class="row align-items-center">
          <div class="col-md-4 col-12">
            <img src="https://img.freepik.com/foto-gratis/coleccion-cajas-regalo_1156-851.jpg?w=826&t=st=1669268380~exp=1669268980~hmac=6f368b13277b6a86754b53c34dd26790df66acbbdb9c6ee3f338249486315b86" alt="Gift boxes">
          </div>
          <div class="col-md-8 col-12">
            <h3>How does it work?</h3>
            <p>We are very thankful with you for trusting us and using our services!</p>
            <p>In order to show our appreciation, we will <i>award</i> you with points that can be traded for special products.</p>
            <p>These points will be given to you after each shipment that you order.</p>
            <p>Enjoy!</p>
          </div>
        </div>
      </section>
    </div>
    <div class="tab-pane fade" id="catalog" role="tabpanel" aria-labelledby="catalog-tab">
      <section class="products container">
        <div class="points">
          <p><b>{{ session.name }}</b> points: ...</p>
        </div>
        <div class="table-responsive">
          <table class="table table-striped table-hover">
            <thead class="table-dark">
              <tr>
                <th></th>
                <th>Name</th>
                <th>Description</th>
                <th class="td-center">Cost</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              {% for product in products %}
                <tr>
                    <td class="td-center">
                      <img src="{{ product[3] }}" alt="Product Image">
                    </td>
                    <td>{{ product[1] }}</td>
                    <td>{{ product[2] }}</td>
                    <td class="td-center">{{ product[4] }} points</td>
                    <td class="td-center">
                      {% if product[5][-1] == 1 %}
                        <button type="button" class="btn btn-dark">Claim</button>
                      {% else %}
                        <span>Unavailable</span>
                        <br>
                        <i class="bi-x-circle-fill"></i>
                      {% endif %}
                    </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </section>
    </div>
    <div class="tab-pane fade" id="orders" role="tabpanel" aria-labelledby="orders-tab">
      <h3>Orders</h3>
    </div>
    <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
      <section class="profile container">
        <div class="row align-items-center">
          <div class="col-md-6 col-12">
            <form action="/update-user" method="POST" onsubmit="return confirm('Do you really want to update your credentials?')">
              <h4>Username</h4>
              <input type="text" name="username" value="{{ session.user }}" required />
              <br>
              <h4>Password</h4>
              <input type="password" name="password" required />
              <br>
              <button type="submit" class="btn btn-dark btn-lg">Update</button>
            </form>
          </div>
          <div class="col-md-6 col-12">
            <div class="divider">
              <h4>Company Name</h4>
              <p>{{ session.name }}</p>
            </div>
            <div class="divider">
              <h4>Address(es)</h4>
              {% for address in addresses %}
                <p>{{ address[1] }}</p>
              {% endfor %}
            </div>
            <div class="divider">
              <h4>Points</h4>
              <p>...</p>
            </div>
          </div>
        </div>
      </section>
      <h4></h4>
    </div>
  </div>
</main>

{% endblock %}